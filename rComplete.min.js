function rComplete(e,t){"use strict";Object.prototype.bindFunctions=function(e){var t=this;return Object.keys(e).forEach(function(n){t[n]=e[n].bind(t)}),this},Object.prototype.bindProperties=function(e){var t=this;return Object.keys(e).forEach(function(n){e[n].constructor===Object?t[n].bindProperties(e[n]):t[n]=e[n]}),this},HTMLElement.prototype.classes=function(){return this.className.split(/\s+/)},HTMLElement.prototype.addClass=function(e){var t=this.classes();return-1===t.indexOf(e)&&(t.push(e),this.className=t.join(" ")),this},HTMLElement.prototype.removeClass=function(e){var t=new RegExp(e,"i");return this.className=this.className.replace(t,"").replace(/\s+/," "),this};var n={placeholder:"Placeholder",matcher:function(e,t){return new RegExp("^"+e,"i").test(t)}};t&&Object.keys(t).forEach(function(e){n[e]=t[e]});var i=document.createElement("div").bindProperties({className:"complete-wrapper",style:{position:"relative"}}),o=document.createElement("input").bindProperties({className:"complete-input",type:"text",value:"",spellcheck:!1,Options:[],Matches:[],style:{position:"relative",width:"100%",verticalAlign:"top",backgroundColor:"transparent"}}),s=o.cloneNode().bindProperties({className:"complete-hint",disabled:!0,value:n.placeholder,realValue:"",style:{position:"absolute"}}),a=document.createElement("div").bindProperties({className:"complete-dropdown",Index:0,style:{display:"none"}}),c=function(){var e=document.createElement("div");return e.className="complete-dropdown-item",e.bindFunctions({Hover:function(){a.LeaveAllItem(),this.addClass("hovered"),s.Render(this.textContent)},Leave:function(){this.removeClass("hovered")},onmouseover:function(){this.Hover()},onmouseout:function(){this.Leave()},onmousedown:function(){o.Complete(this.textContent),setTimeout(function(){o.focus()},0)}}),e};return a.bindFunctions({Empty:function(){for(;this.firstChild;)this.removeChild(this.firstChild)},CurrentItem:function(){return this.childNodes[this.Index]},Move:function(e){this.CurrentItem().Leave();var t=this.Index+e;t>=0&&t<this.childNodes.length&&(this.Index=t),this.CurrentItem().Hover()},Render:function(e){this.Empty();var t=this;e.forEach(function(e){var n=c();n.innerHTML=e,t.appendChild(n)}),this.childNodes.length<=1&&this.Hide()},LeaveAllItem:function(){for(var e=0;e<this.childNodes.length;e++)this.childNodes[e].Leave()},Show:function(){this.childNodes.length>1&&(this.style.display=null)},Hide:function(){this.style.display="none"}}),s.bindFunctions({Show:function(){this.style.display=null},Hide:function(){""===o.value?(this.realValue="",this.value=n.placeholder):this.style.display="none"},isShow:function(){return!this.isHide()},isHide:function(){return"none"===this.style.display},Render:function(e){var t=o.value;this.realValue=e||"",this.value=t+this.realValue.substring(t.length)}}),o.bindFunctions({Match:function(){var e=this,t=this.value;this.Matches=[],this.Options.forEach(function(i){n.matcher(t,i)&&e.Matches.push(i)}),a.Render(this.Matches),s.Render(this.Matches[0]),a.childNodes[0]&&a.childNodes[0].Hover()},oncompleteCallback:function(){},Complete:function(e){this.value=e,this.Match(),this.Hide(),this.oncompleteCallback()},isCompleted:function(){return this.value===s.value},notCompleted:function(){return!this.isCompleted()},Show:function(){s.Show(),a.Show()},Hide:function(){s.Hide(),a.Hide()},hasVisibleHint:function(){return this.notCompleted()&&s.isShow()},onchangeCallback:function(){},onchange:function(){this.Match(),this.Show(),this.onchangeCallback()},oninput:function(){this.onchange()},onfocusCallback:function(){},onfocus:function(){this.Match(),this.Show(),this.onfocusCallback()},onblurCallback:function(){},onblur:function(){this.Hide(),this.onblurCallback()},onkeydown:function(e){var t=(e||window.event).keyCode;switch(t){case 27:this.hasVisibleHint()&&(this.Hide(),this.focus(),e.preventDefault(),e.stopPropagation());break;case 33:case 34:return;case 38:return void a.Move(-1);case 40:return void a.Move(1);case 9:case 13:case 35:case 39:return void(this.hasVisibleHint()&&(this.Complete(s.realValue),e.preventDefault(),e.stopPropagation()))}}}),i.appendChild(s),i.appendChild(o),i.appendChild(a),e.appendChild(i),{wrapper:i,input:o,hint:s,dropdown:a,setOptions:function(e){return o.Options=e,this},getOptions:function(){return o.Options},setText:function(e){return o.Complete(e),this},getText:function(){return o.value},on:function(e,t){switch(e){case"complete":o.oncompleteCallback=t;break;case"change":o.onchangeCallback=t;break;case"focus":o.onfocusCallback=t;break;case"leave":o.onblurCallback=t;break;default:console.warn(e+" is not a vaid event name!")}return this}}}