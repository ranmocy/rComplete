function rComplete(e,t){"use strict";Object.prototype.bindFunctions=function(e){var t=this;return Object.keys(e).forEach(function(n){t[n]=e[n].bind(t)}),this},Object.prototype.bindProperties=function(e){var t=this;return Object.keys(e).forEach(function(n){e[n].constructor===Object?t[n].bindProperties(e[n]):t[n]=e[n]}),this},HTMLElement.prototype.classes=function(){return this.className.split(/\s+/)},HTMLElement.prototype.addClass=function(e){var t=this.classes();return-1===t.indexOf(e)&&(t.push(e),this.className=t.join(" ")),this},HTMLElement.prototype.removeClass=function(e){var t=new RegExp(e,"i");return this.className=this.className.replace(t,"").replace(/\s+/," "),this};var n={placeholder:"Placeholder",matcher:function(e,t){return new RegExp("^"+e,"i").test(t)}};t&&Object.keys(t).forEach(function(e){n[e]=t[e]});var i=document.createElement("div").bindProperties({className:"complete-wrapper",style:{position:"relative"}}),s=document.createElement("input").bindProperties({className:"complete-input",type:"text",value:"",spellcheck:!1,Options:[],Matches:[],style:{position:"relative",width:"100%",verticalAlign:"top",backgroundColor:"transparent"}}),o=s.cloneNode().bindProperties({className:"complete-hint",disabled:!0,value:n.placeholder,realValue:"",style:{position:"absolute"}}),r=document.createElement("div").bindProperties({className:"complete-dropdown",Index:0,style:{display:"none"}}),a=function(){var e=document.createElement("div");return e.className="complete-dropdown-item",e.bindFunctions({Hover:function(){r.LeaveAllItem(),this.addClass("hovered"),o.Render(this.textContent)},Leave:function(){this.removeClass("hovered")},onmouseover:function(){this.Hover()},onmouseout:function(){this.Leave()},onmousedown:function(){s.Complete(this.textContent),setTimeout(function(){s.focus()},0)}}),e};return r.bindFunctions({Empty:function(){for(;this.firstChild;)this.removeChild(this.firstChild)},CurrentItem:function(){return this.childNodes[this.Index]},Move:function(e){this.CurrentItem().Leave();var t=this.Index+e;t>=0&&t<this.childNodes.length&&(this.Index=t),this.CurrentItem().Hover()},Render:function(e){this.Empty();var t=this;e.forEach(function(e){var n=a();n.innerHTML=e,t.appendChild(n)}),this.childNodes.length<=1&&this.Hide()},LeaveAllItem:function(){for(var e=0;e<this.childNodes.length;e++)this.childNodes[e].Leave()},Show:function(){this.childNodes.length>1&&(this.style.display=null)},Hide:function(){this.style.display="none"}}),o.bindFunctions({Show:function(){this.style.display=null},Hide:function(){""===s.value?(this.realValue="",this.value=n.placeholder):this.style.display="none"},isShow:function(){return!this.isHide()},isHide:function(){return"none"===this.style.display},Render:function(e){var t=s.value;this.realValue=e||"",this.value=t+this.realValue.substring(t.length)}}),s.bindFunctions({Match:function(){var e=this,t=this.value;this.Matches=[],this.Options.forEach(function(i){n.matcher(t,i)&&e.Matches.push(i)}),r.Render(this.Matches),o.Render(this.Matches[0]),r.childNodes[0]&&r.childNodes[0].Hover()},Complete:function(e){this.value=e,this.Match(),this.Hide()},isCompleted:function(){return this.value===o.value},notCompleted:function(){return!this.isCompleted()},Show:function(){o.Show(),r.Show()},Hide:function(){o.Hide(),r.Hide()},hasVisibleHint:function(){return this.notCompleted()&&o.isShow()},onchange:function(){this.Match(),this.Show()},oninput:function(){this.onchange()},onfocus:function(){this.Match(),this.Show()},onblur:function(){this.Hide()},onkeydown:function(e){var t=(e||window.event).keyCode;switch(t){case 27:this.hasVisibleHint()&&(this.Hide(),this.focus(),e.preventDefault(),e.stopPropagation());break;case 33:case 34:return;case 38:return void r.Move(-1);case 40:return void r.Move(1);case 9:case 13:case 35:case 39:return void(this.hasVisibleHint()&&(this.Complete(o.realValue),e.preventDefault(),e.stopPropagation()))}}}),i.appendChild(o),i.appendChild(s),i.appendChild(r),e.appendChild(i),{wrapper:i,input:s,hint:o,dropdown:r,setOptions:function(e){return s.Options=e,this},getOptions:function(){return s.Options},setText:function(e){return s.Complete(e),this},getText:function(){return s.value}}}