/* rComplete 1.2.1 Ranmocy Sheng https://github.com/ranmocy/rComplete */
!function(e,t){function n(n,i){"use strict";function o(e,t){return Object.keys(t).forEach(function(n){e[n]=t[n].bind(e)}),e}function s(e,t){return Object.keys(t).forEach(function(n){t[n].constructor===Object?s(e[n],t[n]):e[n]=t[n]}),e}function a(e){return e.className.split(/\s+/)}function c(e,t){var n=a(e);return-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ")),e}function l(e,t){var n=new RegExp(t,"i");return e.className=e.className.replace(n,"").replace(/\s+/," "),e}function r(){var e=t.createElement("div");return e.className="complete-dropdown-item",o(e,{Hover:function(){f.LeaveAllItem(),c(this,"hovered"),p.Render(this.textContent)},Leave:function(){l(this,"hovered")},onclick:function(){this.onmousedown()},onmouseover:function(){this.Hover()},onmouseout:function(){this.Leave()},onmousedown:function(){d.Complete(this.textContent)}}),e}var u={placeholder:"Placeholder",matcher:function(e,t){return new RegExp("^"+e,"i").test(t)}};i&&Object.keys(i).forEach(function(e){u[e]=i[e]});var h=s(t.createElement("div"),{className:"complete-wrapper",style:{position:"relative"}}),d=s(t.createElement("input"),{className:"complete-input",type:"text",value:"",spellcheck:!1,Options:[],Matches:[],style:{position:"relative",width:"100%",verticalAlign:"top",backgroundColor:"transparent"}}),p=s(d.cloneNode(),{className:"complete-hint",disabled:!0,value:u.placeholder,realValue:"",style:{position:"absolute"}}),f=s(t.createElement("div"),{className:"complete-dropdown",Index:0,style:{display:"none"}});return o(f,{Empty:function(){for(;this.firstChild;)this.removeChild(this.firstChild)},CurrentItem:function(){return this.childNodes[this.Index]},Move:function(e){this.CurrentItem().Leave();var t=this.Index+e;t>=0&&t<this.childNodes.length&&(this.Index=t),this.CurrentItem().Hover()},Render:function(e){this.Empty();var t=this;e.forEach(function(e){var n=r();n.innerHTML=e,t.appendChild(n)}),this.childNodes.length<=1&&this.Hide()},LeaveAllItem:function(){for(var e=0;e<this.childNodes.length;e++)this.childNodes[e].Leave()},Show:function(){this.childNodes.length>1&&(this.style.display=null)},Hide:function(){this.style.display="none"}}),o(p,{Show:function(){this.style.display=null},Hide:function(){""===d.value?(this.realValue="",this.value=u.placeholder):this.style.display="none"},isShow:function(){return!this.isHide()},isHide:function(){return"none"===this.style.display},Render:function(e){var t=d.value;this.realValue=e||"",this.value=t+this.realValue.substring(t.length)}}),o(d,{Match:function(){var e=this,t=this.value;this.Matches=[],this.Options.forEach(function(n){u.matcher(t,n)&&e.Matches.push(n)}),f.Render(this.Matches),p.Render(this.Matches[0]),f.childNodes[0]&&f.childNodes[0].Hover()},oncompleteCallback:function(){},Complete:function(e){this.value=e,this.Match(),this.Hide(),this.oncompleteCallback()},isCompleted:function(){return this.value===p.value},notCompleted:function(){return!this.isCompleted()},Show:function(){p.Show(),f.Show()},Hide:function(){p.Hide(),f.Hide()},hasVisibleHint:function(){return this.notCompleted()&&p.isShow()},onchangeCallback:function(){},onchange:function(){this.Match(),this.Show(),this.onchangeCallback()},oninput:function(){this.onchange()},onfocusCallback:function(){},onfocus:function(){this.Match(),this.Show(),this.onfocusCallback()},onblurCallback:function(){},onblur:function(){this.Hide(),this.onblurCallback()},onkeydown:function(t){var n=(t||e.event).keyCode;switch(n){case 27:this.hasVisibleHint()&&(this.Hide(),this.focus(),t.preventDefault(),t.stopPropagation());break;case 33:case 34:return;case 38:return void f.Move(-1);case 40:return void f.Move(1);case 9:case 13:case 35:case 39:return void(this.hasVisibleHint()&&(this.Complete(p.realValue),t.preventDefault(),t.stopPropagation()))}}}),h.appendChild(p),h.appendChild(d),h.appendChild(f),"function"==typeof n.append?n.append(h):n.appendChild(h),{wrapper:h,input:d,hint:p,dropdown:f,setOptions:function(e){return d.Options=e,this},getOptions:function(){return d.Options},setText:function(e){return d.Complete(e),this},getText:function(){return d.value},on:function(e,t){switch(e){case"complete":d.oncompleteCallback=t;break;case"change":d.onchangeCallback=t;break;case"focus":d.onfocusCallback=t;break;case"leave":d.onblurCallback=t;break;default:console.error(e+" is not a vaid event name!")}return this}}}e.rComplete=n,"undefined"!=typeof module&&module.exports&&(module.exports=n),"function"==typeof define&&define.amd&&define(function(){return n})}(window,document);